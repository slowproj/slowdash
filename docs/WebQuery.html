<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Web Query</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="style.css" />
</head>

<body>

<header>
<div class="title">Web Query</div><p>
<div class="toc">
<span class="toc-title">Contents</span>
<nav id="TOC">
<ul>
<li><a href="#url-parameters" id="toc-url-parameters">URL Parameters</a>
<ul>
<li><a href="#slowplot" id="toc-slowplot">SlowPlot</a></li>
<li><a href="#slowdash" id="toc-slowdash">SlowDash</a></li>
<li><a href="#slowcruise" id="toc-slowcruise">SlowCruise</a></li>
</ul></li>
<li><a href="#web-api" id="toc-web-api">Web API</a>
<ul>
<li><a href="#ping" id="toc-ping">Ping</a></li>
<li><a href="#echo-request" id="toc-echo-request">Echo Request</a></li>
<li><a href="#getting-project-configuration"
id="toc-getting-project-configuration">Getting Project
Configuration</a></li>
<li><a href="#channel-list-query" id="toc-channel-list-query">Channel
List Query</a></li>
<li><a href="#data-query" id="toc-data-query">Data Query</a></li>
<li><a href="#fetching-blob-data-content"
id="toc-fetching-blob-data-content">Fetching Blob Data Content</a></li>
<li><a href="#listing-user-configuration-entries"
id="toc-listing-user-configuration-entries">Listing User Configuration
Entries</a></li>
<li><a href="#fetching-user-configuration-content"
id="toc-fetching-user-configuration-content">Fetching User Configuration
Content</a></li>
<li><a href="#listing-user-configuration-files"
id="toc-listing-user-configuration-files">Listing User Configuration
Files</a></li>
<li><a href="#fetching-user-configuration-files"
id="toc-fetching-user-configuration-files">Fetching User Configuration
Files</a></li>
<li><a href="#uploading-user-configuration-files"
id="toc-uploading-user-configuration-files">Uploading User Configuration
Files</a></li>
<li><a href="#sending-commands-to-user-modules"
id="toc-sending-commands-to-user-modules">Sending Commands to User
Modules</a></li>
</ul></li>
</ul>
</nav>
</div>
</header>

<h1 id="url-parameters">URL Parameters</h1>
<h2 id="slowplot">SlowPlot</h2>
<h3 id="url">URL</h3>
<h4 id="case-1-start-from-blank">Case 1: Start from blank</h4>
<pre class="http"><code>http://ADDRESS:PORT/slowplot.html?OPTIONS</code></pre>
<h4 id="case-2-making-a-plot-of-a-specified-channels">Case 2: Making a
plot of (a) specified channel(s)</h4>
<pre><code>http://ADDRESS:PORT/slowplot.html?channel=CHANNELS&amp;OPTIONS</code></pre>
<ul>
<li>CHANNELS is a list of channels separated by <code>,</code> without
spaces.</li>
<li>To make multiple plots, separate the channels by
<code>;</code>.</li>
<li>Plots can have type specifier, separated by <code>/</code>. Default
is “timeseries”.</li>
<li>Example: <code>channel=ch0,ch1;log/table</code>.</li>
</ul>
<h4 id="case-3-using-saved-configuration-file">Case 3: Using saved
configuration file</h4>
<pre><code>http://ADDRESS:PORT/slowplot.html?config=CONFIG_FILE&amp;OPTIONS</code></pre>
<h3 id="mandatory-options">Mandatory Options</h3>
<ul>
<li>For Case 2: <code>channel=CAHNNEL_LIST</code></li>
<li>For Case 3: <code>config=CONFIG_FILE</code></li>
</ul>
<h3 id="optional-options">Optional Options</h3>
<ul>
<li><code>to=TIME</code> (in UNIX time or ISO format, default: current
time)</li>
<li><code>length=LENGTH</code> (default: 900)</li>
<li><code>reload=RELOAD</code> (default: 300)</li>
<li><code>grid=GRID</code> (default: 2x1)</li>
</ul>
<h2 id="slowdash">SlowDash</h2>
<h3 id="url-1">URL</h3>
<pre><code>http://ADDRESS:PORT/slowdash.html?config=CONFIG_FILE&amp;OPTIONS</code></pre>
<h3 id="mandatory-options-1">Mandatory Options</h3>
<ul>
<li><code>config=CONFIG_FILE</code></li>
</ul>
<h3 id="optional-options-1">Optional Options</h3>
<ul>
<li><code>time=TIME</code> (in UNIX time or ISO format, default: current
time)</li>
<li><code>length=LENGTH</code> (default: 3600)</li>
<li><code>reload=RELOAD</code> (default: 300)</li>
</ul>
<h2 id="slowcruise">SlowCruise</h2>
<h3 id="url-2">URL</h3>
<pre><code>http://ADDRESS:PORT/slowcruise.html?config=CONFIG_FILE&amp;OPTIONS</code></pre>
<h3 id="mandatory-options-2">Mandatory Options</h3>
<ul>
<li><code>config=CONFIG_FILE</code></li>
</ul>
<h3 id="optional-options-2">Optional Options</h3>
<ul>
<li><code>interval=INTERVAL</code> (default: 60)</li>
</ul>
<h1 id="web-api">Web API</h1>
<h2 id="ping">Ping</h2>
<h3 id="request">Request</h3>
<pre><code>GET http://ADDRESS:PORT/api/ping</code></pre>
<h3 id="reply">Reply</h3>
<div class="sourceCode" id="cb7"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="er">&quot;pong&quot;</span></span></code></pre></div>
<h2 id="echo-request">Echo Request</h2>
<h3 id="request-1">Request</h3>
<pre><code>GET http://ADDRESS:PORT/api/echo/PATH?OPTIONS</code></pre>
<h3 id="reply-1">Reply</h3>
<div class="sourceCode" id="cb9"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;URL&quot;</span><span class="fu">:</span> <span class="st">&quot;echo/PATH?OPTIONS&quot;</span><span class="fu">,</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;Path&quot;</span><span class="fu">:</span> <span class="ot">[</span> <span class="er">PATH_ELEMENTS</span> <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;Opts&quot;</span><span class="fu">:</span> <span class="fu">{</span> <span class="er">OPTION_ELEMENTS</span> <span class="fu">}</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<h2 id="getting-project-configuration">Getting Project
Configuration</h2>
<h3 id="request-2">Request</h3>
<pre><code>GET http://ADDRESS:PORT/api/config</code></pre>
<h3 id="reply-example-atds-project">Reply Example (ATDS Project)</h3>
<div class="sourceCode" id="cb11"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;project&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;ATDS&quot;</span><span class="fu">,</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;title&quot;</span><span class="fu">:</span> <span class="st">&quot;Atomic Tritium Demonstrator at UW (ATDS)&quot;</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">},</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;style&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;theme&quot;</span><span class="fu">:</span> <span class="st">&quot;light&quot;</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">},</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;contents&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;slowdash&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>            <span class="fu">{</span></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>                <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;ATDS&quot;</span><span class="fu">,</span></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>                <span class="dt">&quot;mtime&quot;</span><span class="fu">:</span> <span class="fl">1677724206.5829866</span><span class="fu">,</span></span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>                <span class="dt">&quot;title&quot;</span><span class="fu">:</span> <span class="st">&quot;&quot;</span><span class="fu">,</span></span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>                <span class="dt">&quot;description&quot;</span><span class="fu">:</span> <span class="st">&quot;Atomic Tritium Demonstrator at UW Top Level&quot;</span><span class="fu">,</span></span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a>                <span class="dt">&quot;config_file&quot;</span><span class="fu">:</span> <span class="st">&quot;slowdash-ATDS.json&quot;</span></span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a>            <span class="fu">}</span></span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a>        <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;slowplot&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a>            <span class="fu">{</span></span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a>                <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;RTD_ACC&quot;</span><span class="fu">,</span></span>
<span id="cb11-22"><a href="#cb11-22" aria-hidden="true" tabindex="-1"></a>                <span class="dt">&quot;mtime&quot;</span><span class="fu">:</span> <span class="fl">1678019620.6981564</span><span class="fu">,</span></span>
<span id="cb11-23"><a href="#cb11-23" aria-hidden="true" tabindex="-1"></a>                <span class="dt">&quot;title&quot;</span><span class="fu">:</span> <span class="st">&quot;Accomodator RTDs&quot;</span><span class="fu">,</span></span>
<span id="cb11-24"><a href="#cb11-24" aria-hidden="true" tabindex="-1"></a>                <span class="dt">&quot;description&quot;</span><span class="fu">:</span> <span class="st">&quot;Accomodator RTDs&quot;</span><span class="fu">,</span></span>
<span id="cb11-25"><a href="#cb11-25" aria-hidden="true" tabindex="-1"></a>                <span class="dt">&quot;config_file&quot;</span><span class="fu">:</span> <span class="st">&quot;slowplot-RTD_ACC.json&quot;</span></span>
<span id="cb11-26"><a href="#cb11-26" aria-hidden="true" tabindex="-1"></a>            <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb11-27"><a href="#cb11-27" aria-hidden="true" tabindex="-1"></a>            <span class="fu">{</span></span>
<span id="cb11-28"><a href="#cb11-28" aria-hidden="true" tabindex="-1"></a>                <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;ATDS&quot;</span><span class="fu">,</span></span>
<span id="cb11-29"><a href="#cb11-29" aria-hidden="true" tabindex="-1"></a>                <span class="dt">&quot;mtime&quot;</span><span class="fu">:</span> <span class="fl">1677726950.1148098</span><span class="fu">,</span></span>
<span id="cb11-30"><a href="#cb11-30" aria-hidden="true" tabindex="-1"></a>                <span class="dt">&quot;title&quot;</span><span class="fu">:</span> <span class="st">&quot;ATDS Overview&quot;</span><span class="fu">,</span></span>
<span id="cb11-31"><a href="#cb11-31" aria-hidden="true" tabindex="-1"></a>                <span class="dt">&quot;description&quot;</span><span class="fu">:</span> <span class="st">&quot;ATDS Standard Plots&quot;</span><span class="fu">,</span></span>
<span id="cb11-32"><a href="#cb11-32" aria-hidden="true" tabindex="-1"></a>                <span class="dt">&quot;config_file&quot;</span><span class="fu">:</span> <span class="st">&quot;slowplot-ATDS.json&quot;</span></span>
<span id="cb11-33"><a href="#cb11-33" aria-hidden="true" tabindex="-1"></a>            <span class="fu">}</span></span>
<span id="cb11-34"><a href="#cb11-34" aria-hidden="true" tabindex="-1"></a>        <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb11-35"><a href="#cb11-35" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;slowcruise&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb11-36"><a href="#cb11-36" aria-hidden="true" tabindex="-1"></a>            <span class="fu">{</span></span>
<span id="cb11-37"><a href="#cb11-37" aria-hidden="true" tabindex="-1"></a>                <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;AllPlots&quot;</span><span class="fu">,</span></span>
<span id="cb11-38"><a href="#cb11-38" aria-hidden="true" tabindex="-1"></a>                <span class="dt">&quot;mtime&quot;</span><span class="fu">:</span> <span class="fl">1678019441.923559</span><span class="fu">,</span></span>
<span id="cb11-39"><a href="#cb11-39" aria-hidden="true" tabindex="-1"></a>                <span class="dt">&quot;title&quot;</span><span class="fu">:</span> <span class="st">&quot;ATDS All Plots&quot;</span><span class="fu">,</span></span>
<span id="cb11-40"><a href="#cb11-40" aria-hidden="true" tabindex="-1"></a>                <span class="dt">&quot;description&quot;</span><span class="fu">:</span> <span class="st">&quot;Loop over all Dashboards and Plots&quot;</span><span class="fu">,</span></span>
<span id="cb11-41"><a href="#cb11-41" aria-hidden="true" tabindex="-1"></a>                <span class="dt">&quot;config_file&quot;</span><span class="fu">:</span> <span class="st">&quot;slowcruise-AllPlots.yaml&quot;</span></span>
<span id="cb11-42"><a href="#cb11-42" aria-hidden="true" tabindex="-1"></a>            <span class="fu">}</span></span>
<span id="cb11-43"><a href="#cb11-43" aria-hidden="true" tabindex="-1"></a>        <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb11-44"><a href="#cb11-44" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;alarms&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb11-45"><a href="#cb11-45" aria-hidden="true" tabindex="-1"></a>            <span class="fu">{</span></span>
<span id="cb11-46"><a href="#cb11-46" aria-hidden="true" tabindex="-1"></a>                <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;normal&quot;</span><span class="fu">,</span></span>
<span id="cb11-47"><a href="#cb11-47" aria-hidden="true" tabindex="-1"></a>                <span class="dt">&quot;mtime&quot;</span><span class="fu">:</span> <span class="fl">1630663955.5648437</span><span class="fu">,</span></span>
<span id="cb11-48"><a href="#cb11-48" aria-hidden="true" tabindex="-1"></a>                <span class="dt">&quot;title&quot;</span><span class="fu">:</span> <span class="st">&quot;&quot;</span><span class="fu">,</span></span>
<span id="cb11-49"><a href="#cb11-49" aria-hidden="true" tabindex="-1"></a>                <span class="dt">&quot;description&quot;</span><span class="fu">:</span> <span class="st">&quot;&quot;</span><span class="fu">,</span></span>
<span id="cb11-50"><a href="#cb11-50" aria-hidden="true" tabindex="-1"></a>                <span class="dt">&quot;config_file&quot;</span><span class="fu">:</span> <span class="st">&quot;alarms-normal.yaml&quot;</span></span>
<span id="cb11-51"><a href="#cb11-51" aria-hidden="true" tabindex="-1"></a>            <span class="fu">}</span></span>
<span id="cb11-52"><a href="#cb11-52" aria-hidden="true" tabindex="-1"></a>        <span class="ot">]</span></span>
<span id="cb11-53"><a href="#cb11-53" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb11-54"><a href="#cb11-54" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<h2 id="channel-list-query">Channel List Query</h2>
<h3 id="request-3">Request</h3>
<pre><code>GET http://ADDRESS:PORT/api/channels</code></pre>
<h3 id="reply-2">Reply</h3>
<div class="sourceCode" id="cb13"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="ot">[</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span> <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="er">CH0_NAME</span><span class="fu">,</span> <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="er">CH0_TYPE</span> <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>    <span class="er">...</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="ot">]</span></span></code></pre></div>
<h2 id="data-query">Data Query</h2>
<h3 id="request-4">Request</h3>
<pre><code>GET http://ADDRESS:PORT/api/data/CHANNEL_LIST?OPTIONS</code></pre>
<p>channel list is:</p>
<pre><code>CH0,CH1,CH2...</code></pre>
<p>options are:</p>
<pre><code>length=LENGTH [default 3600]
to=TO [default 0 (now)]
resample=RESAMPLE [default 0 (auto)]
reducer=REDUCER [default &quot;last&quot;]</code></pre>
<p>For details see the <a href="DataModel.html">Data Model
section</a>.</p>
<h2 id="fetching-blob-data-content">Fetching Blob Data Content</h2>
<h3 id="request-5">Request</h3>
<pre><code>GET http://ADDRESS:PORT/api/blob/CHANNEL/ID</code></pre>
<h2 id="listing-user-configuration-entries">Listing User Configuration
Entries</h2>
<h3 id="request-6">Request</h3>
<pre><code>GET http://ADDRESS:PORT/api/config/contentlist</code></pre>
<h2 id="fetching-user-configuration-content">Fetching User Configuration
Content</h2>
<p>This returns the content of the configuration entry. If the file is
YAML, it is converted into JSON. If the file is a Python script, the
reply content will be dynamically generated.</p>
<h3 id="request-7">Request</h3>
<pre><code>GET http://ADDRESS:PORT/api/config/content/FILENAME</code></pre>
<h2 id="listing-user-configuration-files">Listing User Configuration
Files</h2>
<h3 id="request-8">Request</h3>
<pre><code>GET http://ADDRESS:PORT/api/config/filelist</code></pre>
<h2 id="fetching-user-configuration-files">Fetching User Configuration
Files</h2>
<p>This returns the raw content of the file</p>
<h3 id="request-9">Request</h3>
<pre><code>GET http://ADDRESS:PORT/api/config/file/FILENAME</code></pre>
<ul>
<li>The FILENAME must:
<ul>
<li>start with an alphabet or <code>_</code></li>
<li>consist of only alphabets, digits, <code>_</code>, <code>-</code>,
<code>.</code>, <code>,</code>, <code>:</code>, <code>[</code> and
<code>]</code></li>
<li>end with one of: <code>.json</code>, <code>.yaml</code>,
<code>.html</code>, <code>.png</code>, <code>.jpg</code>,
<code>.jpeg</code>, <code>.svg</code>, <code>.csv</code></li>
</ul></li>
</ul>
<h2 id="uploading-user-configuration-files">Uploading User Configuration
Files</h2>
<h3 id="request-10">Request</h3>
<pre><code>POST http://ADDRESS:PORT/api/config/file/NAME?OPTIONS
[ with JSON text as contents ]</code></pre>
<ul>
<li>The NAME must:
<ul>
<li>consist of only alphabets, digits, <code>.</code>, <code>_</code>
and <code>-</code>.</li>
<li>start with <code>slowdash-</code>, <code>slowplot-</code>, or
<code>slowcruise-</code>.</li>
<li>end with <code>.json</code> or <code>.yaml</code>.</li>
</ul></li>
<li>Files are stored under the <code>config</code> sub-directory of the
user project directory.</li>
</ul>
<h3 id="response">Response</h3>
<ul>
<li>If the file writing is not permitted by the file system,
<ul>
<li>returns the HTTP response code 403 (Forbidden).</li>
</ul></li>
<li>If the file already exists, and OPTION does not include
<code>overwrite=yes</code>,
<ul>
<li>returns the HTTP response code 202 (Accepted) without
overwriting.</li>
</ul></li>
<li>Otherwise, the file will be created or overwritten, and
<ul>
<li>if writing is successful, returns HTTP response 201 (Created).</li>
<li>otherwise returns HTTP response 500 (Internal Server Error).</li>
</ul></li>
</ul>
<h3 id="javascript-snippet">JavaScript Snippet</h3>
<div class="sourceCode" id="cb23"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">fetch</span>(url<span class="op">,</span> {</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">method</span><span class="op">:</span> <span class="st">&#39;POST&#39;</span><span class="op">,</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">headers</span><span class="op">:</span> { <span class="st">&#39;Content-Type&#39;</span><span class="op">:</span> <span class="st">&#39;application/json; charset=utf-8&#39;</span> }<span class="op">,</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">body</span><span class="op">:</span> <span class="bu">JSON</span><span class="op">.</span><span class="fu">stringify</span>(doc<span class="op">,</span> <span class="kw">null</span><span class="op">,</span> <span class="dv">2</span>)</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a><span class="op">.</span><span class="fu">then</span>(response <span class="kw">=&gt;</span> {</span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (response<span class="op">.</span><span class="at">status</span> <span class="op">==</span> <span class="dv">202</span>) {</span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>       <span class="co">// file already exists. retry with overwrite=yes to overwrite</span></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>       <span class="cf">return</span><span class="op">;</span></span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="op">!</span> response<span class="op">.</span><span class="at">ok</span>) {</span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a>        <span class="cf">throw</span> <span class="kw">new</span> <span class="bu">Error</span>(response<span class="op">.</span><span class="at">status</span> <span class="op">+</span> <span class="st">&quot; &quot;</span> <span class="op">+</span> response<span class="op">.</span><span class="at">statusText</span>)<span class="op">;</span></span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a>    <span class="co">//// success ////</span></span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a>    <span class="op">....</span></span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a><span class="op">.</span><span class="fu">catch</span>(e <span class="kw">=&gt;</span> {</span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a>    <span class="co">//// error  ////</span></span>
<span id="cb23-19"><a href="#cb23-19" aria-hidden="true" tabindex="-1"></a>    <span class="op">....</span></span>
<span id="cb23-20"><a href="#cb23-20" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span></code></pre></div>
<h2 id="sending-commands-to-user-modules">Sending Commands to User
Modules</h2>
<h3 id="request-11">Request</h3>
<pre><code>POST http://ADDRESS:PORT/api/control
[ with JSON text as contents ]</code></pre>
<h3 id="response-1">Response</h3>
<ul>
<li>If the command is not recognized, returns the HTTP response 400 (Bad
Request).</li>
<li>If the command is processed, returns the HTTP response 201, with
contents of:
<ul>
<li>If the user module provides custom result JSON (typically with
<code>{"status": ...; "message": ...}</code>), it will be returned.</li>
<li>Otherwise, returns <code>{"status": "ok"}</code> on success, or
<code>{"status": "error"}</code> on error.</li>
</ul></li>
</ul>
<h3 id="javascript-snippet-1">JavaScript Snippet</h3>
<p>A typical JavaScript would look like:</p>
<div class="sourceCode" id="cb25"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">fetch</span>(url<span class="op">,</span> {</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">method</span><span class="op">:</span> <span class="st">&#39;POST&#39;</span><span class="op">,</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">headers</span><span class="op">:</span> { <span class="st">&#39;Content-Type&#39;</span><span class="op">:</span> <span class="st">&#39;application/json; charset=utf-8&#39;</span> }<span class="op">,</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">body</span><span class="op">:</span> <span class="bu">JSON</span><span class="op">.</span><span class="fu">stringify</span>(doc<span class="op">,</span> <span class="kw">null</span><span class="op">,</span> <span class="dv">2</span>)</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a><span class="op">.</span><span class="fu">then</span>(response <span class="kw">=&gt;</span> {</span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="op">!</span> response<span class="op">.</span><span class="at">ok</span>) {</span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">throw</span> <span class="kw">new</span> <span class="bu">Error</span>(response<span class="op">.</span><span class="at">status</span> <span class="op">+</span> <span class="st">&quot; &quot;</span> <span class="op">+</span> response<span class="op">.</span><span class="at">statusText</span>)<span class="op">;</span></span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> response<span class="op">.</span><span class="fu">json</span>()<span class="op">;</span></span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a><span class="op">.</span><span class="fu">then</span>(doc <span class="kw">=&gt;</span> {</span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> ((doc<span class="op">.</span><span class="at">status</span> <span class="op">??</span> <span class="st">&#39;&#39;</span>)<span class="op">.</span><span class="fu">toUpperCase</span>() <span class="op">==</span> <span class="st">&#39;ERROR&#39;</span>) {</span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a>        <span class="cf">throw</span> <span class="kw">new</span> <span class="bu">Error</span>(doc<span class="op">.</span><span class="at">message</span> <span class="op">??</span> <span class="st">&#39;&#39;</span>)<span class="op">;</span></span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true" tabindex="-1"></a>    <span class="co">//// success ////</span></span>
<span id="cb25-17"><a href="#cb25-17" aria-hidden="true" tabindex="-1"></a>    <span class="op">....</span></span>
<span id="cb25-18"><a href="#cb25-18" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb25-19"><a href="#cb25-19" aria-hidden="true" tabindex="-1"></a><span class="op">.</span><span class="fu">catch</span>(e <span class="kw">=&gt;</span> {</span>
<span id="cb25-20"><a href="#cb25-20" aria-hidden="true" tabindex="-1"></a>    <span class="co">//// error ////</span></span>
<span id="cb25-21"><a href="#cb25-21" aria-hidden="true" tabindex="-1"></a>    <span class="op">....</span></span>
<span id="cb25-22"><a href="#cb25-22" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span></code></pre></div>


</body>
</html>
